# ThinkPHP5.0 学习记录

## 命名规范与与录结构

### 命名规范

一、匈牙利利命名法：

标识符中的每个单词之间用下划线分隔：user_name;

二、驼峰命名法：

标识符中的每个单词的首字母大写，用大写字母来分隔，根据首字母是否大写又分为：

- 大驼峰:首字母大写，常用作类名：ClassName,又称：帕斯卡命名法
- 小驼峰:除第一个单词外，每个单词首字母大写,常用作类属性和方法: $userName

1、目录与文件

| 类型             | 命名规范                         | 实例                     |
| ---------------- | -------------------------------- | ------------------------ |
| 目录             | 小写字母 / 小写字母+下划线       | user / user_type         |
| 类文件（驼峰法） | 命名空间与文件真实路径完全一致   | app\index\controller     |
|                  | 类名与文件名保持一致(首字母大写) | User.php中只有User类     |
| 其它文件         | 小写字母 / 小写字母+下划线       | list.php / list_user.php |

2、函数与类属性与方法

| 类型     | 命名规范                        | 实例                    |
| -------- | ------------------------------- | ----------------------- |
| 函数     | 匈牙利命名法（小写字母+下划线） | get_user_type()         |
| 类的方法 | 驼峰法（首字母小写）            | getName()               |
| 类的属性 | 驼峰法（首字母小写）            | userType                |
| 魔术方法 | 双下划线开头+驼峰命名法         | \__set(),__callStatic() |

3、常量与配置参数

| 类型     | 命名规范                        | 实例         |
| -------- | ------------------------------- | ------------ |
| 常量     | （匈牙利命名法）大写字母+下划线 | APP_PATH     |
| 配置参数 | （匈牙利命名法）小写字母+下划线 | url_route_on |

4、数据库与字段

| 类型   | 命名规范                       | 实例         |
| ------ | ------------------------------ | ------------ |
| 数据表 | 小写字母+下划线，前缀+数据库名 | tp_myhcms    |
| 字段表 | 小写字母+下划线，前缀+表名     | myhcms_admin |

**注意事项：**

>  不要使用PHP保留关键字用作：常量名、类名、 方法名、命名空间等，否则会引起系统错误~~~

### 目录结构

| 序号 | 名称          | 说明                     |
| ---- | ------------- | ------------------------ |
| 1    | application   | 应用目录(可自定义)       |
| 2    | extent        | 扩展类库⽬录(可⾃定义)   |
| 3    | public        | 外部可访问的Web目录      |
| 4    | runtime       | 应用运行时目录           |
| 5    | thinkphp      | 框架核心库目录           |
| 6    | vendor        | 第三方类型目录           |
| 7    | build.php     | 自动生成定义文件（参考） |
| 8    | composer.json | composer 定义文件        |
| 9    | LICENSE.txt   | 版权文件                 |
| 10   | README.md     | reamdme，即框架说明文件  |
| 11   | think         | 命令行入口文件           |

## 架构总览

### 1、架构总览

ThinkPHP5.0 基于 MVC （模型-视图-控制器）方式来组织；

![mvc](https://s3.ax1x.com/2021/01/21/shplYn.png)

> 模型与视图，控控制器强制分离，数据请求与展示由控制器统一调配!

URL访问默认采用PATH_INFO方式：

![](https://s3.ax1x.com/2021/01/21/sh9pcV.png)

### 2、常用术语

一、入口文件（index.php）

1. 入口文件是整个Web应用的起点；
2. 入口文件最常用的是:index.php;
3. 入口文件并不唯一，例如可为后台单独设置入口:admin.php；
4. 入口文件可以通过URL重写功能将其隐藏。

二、应用(application)

1. 应用是URL请求到完成的(生命周期)处理对象，由\think\App类处理；
2. 应用必须在入口文件(如index.php)中调用并执行；
3. 可为不同的应用创建多个入口文件，如后台入口:admin.php；
4. 应用有自己独立的配置文件(config.php)和公共函数文件(common.php)；

三、模块(module)

1. 一个应用下有多个模块，对应着应用的不同部分，如前台，后台；
2. 每个模块都可以有完整的MVC类库，创建和管理这些类库是我们最主要的工作；
3. 每个模块可以有独立的配置文件(config.php)和公共函数文件(common.php)；
4. 如果应用简单，可使用单模块模式：'app_multi_module' => false，此时应用
目录下，就没有模块子目录啦~~

四、控制器(controller)

1. 每个模块下可以有多个控制器负责响应URL请求；
2. 每个控制器对应一个控制器类(class)，如User.php；
3. 控制器管理着模型与视图，是系统资源的调度与分配中心；
4. ThinkPHP5的控制器不需要继承任何基类就可以工作。

五、操作(action)

1. 操作对应着控制器类中的方法，最URL请求的最小单元；
2. 任何URL请求，最终都是由控制器中的操作方法来完成；
3. 操作是整个应用的最终执行单元，是URL路由的核心与目标；

六、模型(model)

1. 模型通常对应整个应用，因此模型通常在应用(application)目录下创建；
2. 尽管模型主要是针对数据库进行CURD操作，但也可以不操作数据库；
3. 模型通常完成实际的业务逻辑和数据封装，并返回和格式无关的数据；
4. 模型返回的数据，通常是数组(array)或字符串(string)；
5. 模型支持分层操作，例如将模型层分为逻辑层/服务层/事件层。

七、视图(view)

1. 控制器调用模型返回的数据，是通过视图转换成不同格式输出的；
2. 视图根据请求，调用模板引擎确定是直接输出还是模板解析后再输出；
3. 视图由大量模板文件组成，这些文件对应着不同控制器中的操作方法；
4. 模板目录可以动态设置；
5. 视图最直观的理解，就是由一系列的HTML文件组成。